# Develop on the Servlet

This guide outlines the steps to set up and run the project locally using Docker and Gradle for a Spring-based servlet application.

## Requirements

Before starting, ensure your development environment meets the following requirements:

- **Node.js**: v23.x
- **Docker**: Ensure Docker is installed and running on your machine.
- **pnpm**: Package manager used for frontend dependencies.
- **JDK**: 21 (Java Development Kit version 21) is required for building and running the Spring servlet.
- **Minimum RAM**: 2GB (for local development and running the services).

## Setup and Run

Follow these steps to set up and run the project:

### 1. Setup Docker Compose

Docker Compose is used to manage and run the services in containers. To start the services, use the following command:

```bash
docker compose up -d
```

This command will start the Docker containers in detached mode.

### 2. Build the Servlet

Use **Gradle** to build the Spring-based servlet application. The `bootJar` task creates a deployable `.jar` file. The `-x test` option skips the tests during the build process.

```bash
./gradlew clean bootJar -x test
```

- `clean`: Cleans up the build directory before building.
- `bootJar`: Creates an executable JAR file that contains the servlet application.
- `-x test`: Skips the tests to speed up the build process.

### 3. Start the Servlet

Once the build completes successfully, you can run the servlet application with the following command:

```bash
java -jar ./build/libs/lunar-api-xxx.jar
```

Replace `xxx` with the actual version number generated by the build process.

The servlet will now be running and accessible on the specified port (default: `8080`).

## Additional Information

- **Docker Compose**: Docker Compose will manage the backend services (e.g., databases, cache) required for the servlet to function correctly. Ensure Docker is running before starting the compose process.

- **Logs**: If you need to view the logs of the running container, use the following command:

  ```bash
  docker logs <container_name>
  ```

- **Stopping the Services**: To stop all Docker services, run:

  ```bash
  docker compose down
  ```
